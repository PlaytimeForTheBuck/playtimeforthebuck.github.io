function timeSince(t){var e=Math.floor((new Date-t)/1e3),r=e/31536e3,i=function(t){return 1===t?"":"s"};return r>1?Math.round(10*r)/10+" year"+i(r):(r=Math.floor(e/2592e3),r>=1?r+" month"+i(r):(r=Math.floor(e/86400),r>=1?r+" day"+i(r):(r=Math.floor(e/3600),r>=1?r+" hour"+i(r):(r=Math.floor(e/60),r>=1?r+" minute"+i(r):Math.floor(e)+" second"+i(e)))))}!function(){function t(t){var e=r[t];return i(n[e])}var e,r,i=function(t){return"function"==typeof t},s=[].slice,n=Function.prototype;r={"function-bind":"bind"},t("function-bind")||(e=function(t){var e=s.call(arguments,1),r=this,i=function(){},n=function(){return r.apply(this instanceof i?this:t||{},e.concat(s.call(arguments)))};return i.prototype=this.prototype||{},n.prototype=new i,n},n.bind=e)}(),"document"in self&&!function(t){"use strict";if("Element"in t){var e="classList",r="prototype",i=t.Element[r],s=Object,n=String[r].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[r].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},o=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new o("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new o("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(t,e)},u=function(t){for(var e=n.call(t.getAttribute("class")||""),r=e?e.split(/\s+/):[],i=0,s=r.length;s>i;i++)this.push(r[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},p=u[r]=[],h=function(){return new u(this)};if(o[r]=Error[r],p.item=function(t){return this[t]||null},p.contains=function(t){return t+="",-1!==l(this,t)},p.add=function(){var t,e=arguments,r=0,i=e.length,s=!1;do t=e[r]+"",-1===l(this,t)&&(this.push(t),s=!0);while(++r<i);s&&this._updateClassName()},p.remove=function(){var t,e=arguments,r=0,i=e.length,s=!1;do{t=e[r]+"";var n=l(this,t);-1!==n&&(this.splice(n,1),s=!0)}while(++r<i);s&&this._updateClassName()},p.toggle=function(t,e){t+="";var r=this.contains(t),i=r?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),!r},p.toString=function(){return this.join(" ")},s.defineProperty){var c={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,c)}catch(f){-2146823252===f.number&&(c.enumerable=!1,s.defineProperty(i,e,c))}}else s[r].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){this.JST||(this.JST={}),this.JST["templates/array_filter"]=function(obj){var __p=[];with(obj||{})__p.push('<input class="text-filter-value input input-text" placeholder="Click, tags, below" type="text"/>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/date_filter"]=function(obj){var __p=[];with(obj||{})__p.push('<select class="number-filter-value-start placeholdered input input-select" title="From">\r\n	<option value="" selected class="hidden">From</option>\r\n	<option value=""></option>\r\n</select\r\n><select class="number-filter-value-end placeholdered input input-select" title="To">\r\n	<option value="" selected class="hidden">To</option>\r\n	<option value=""></option>\r\n</select>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/flags_filter"]=function(obj){var __p=[];with(obj||{}){__p.push("");for(flagName in flagsList)__p.push('\r\n  <input type="checkbox" id="flag-',flagName,'"\r\n         class="filter-flag-input filter-flag-input-',flagName,' input input-checkbox"\r\n         title="',flagsMessages[flagName],'" \r\n         value="',flagsList[flagName],'"/>\r\n  <label class="flag filter-flag flag-',flagName,'"\r\n       for="flag-',flagName,'"\r\n       title="',flagsMessages[flagName],'">\r\n    ',flagsMessages[flagName],"\r\n  </label>\r\n");__p.push("\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/game"]=function(obj){var __p=[];with(obj||{}){__p.push('<tr game>\r\n  <td class="cropped-column">\r\n    <div class="column-cropper-wrapper">\r\n      <div class="column-cropper">\r\n        <a href="http://store.steampowered.com/app/',steamAppId,'">',name,'</a>\r\n      </div>\r\n    </div>\r\n  </td>\r\n  <td class="tags-cell cropped-column">\r\n    <div class="column-cropper-wrapper">\r\n      <div class="column-cropper">\r\n        ');for(var i=0;i<categories.length;i++)__p.push('\r\n          <span class="tag">',categories[i],"</span>\r\n        ");__p.push("\r\n      </div>\r\n    </div>\r\n  </td>\r\n  <td>",launchDateSinceText?launchDateSinceText+" ago":"???"," </td>\r\n  <td>\r\n    "),null!==salePrice?__p.push('\r\n      <span class="strike">$',price,"</span> ",salePrice?"$"+salePrice:"Free","\r\n    "):__p.push("\r\n      ",price?"$"+price:"Free","\r\n    "),__p.push("\r\n  </td>\r\n  <td>\r\n    -"),null!==sale&&__p.push("",sale,"%"),__p.push("\r\n  </td>\r\n  <td>",averageTime?averageTime+" hours":"-",'</td>\r\n  <td class="hidden">',maxTime,' hours</td>\r\n  <td class="hidden">',minTime,' hours</td>\r\n  <td class="hidden">',averageTimePositive,' hours</td>\r\n  <td class="hidden">',averageTimeNegative," hours</td>\r\n  <td>",averageTimeOverPrice?averageTimeOverPrice+" hours/$":"N/A",'</td>\r\n  <td class="hidden">',positiveReviewsLength,"",positiveReviewsLength>=1e3?"+":"",'</td>\r\n  <td class="hidden">',negativeReviewsLength,"",negativeReviewsLength>=1e3?"+":"","</td>\r\n  <td>",totalReviews,"",totalReviews>=1e3?"+":"","</td>\r\n  <td>",null!==metaScore?metaScore:"-",'</td>\r\n  <td class="reviews-distribution-cell" title="',positiveReviewsPercentage,'%">\r\n    '),null!==positiveReviewsPercentage?__p.push('\r\n    <div class="reviews-distribution">\r\n      <div class="positive-reviews-percentage" style="width: ',positiveReviewsPercentage,'%"></div>\r\n    </div>\r\n    '):__p.push(" - "),__p.push('\r\n  </td>\r\n  <td class="centiles">\r\n    ',null!==playtimeDeviationPercentage?playtimeDeviationPercentage+"%":"-",'\r\n  </td>\r\n  <td class="features-flags-cell">\r\n    ');for(flagName in featuresFlagsList)__p.push('\r\n      <span title="',flagsLabels[flagName],'" \r\n            class="flag flag-',flagName," \r\n            "),featuresFlagsList[flagName]&features||__p.push(" disabled "),__p.push('">\r\n        ',flagsLabels[flagName],"\r\n      </span>\r\n    ");__p.push('\r\n  </td>\r\n  <td class="os-flags-cell">\r\n    ');for(flagName in osFlagsList)__p.push('\r\n      <span title="',flagsLabels[flagName],'" \r\n            class="flag flag-',flagName,"\r\n            "),osFlagsList[flagName]&os||__p.push(" disabled "),__p.push('">\r\n        ',flagsLabels[flagName],"\r\n      </span>\r\n    ");__p.push("\r\n  </td>\r\n</tr>\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/number_filter"]=function(obj){var __p=[];with(obj||{})__p.push('<select class="number-filter-value-start placeholdered input input-select" title=\'Min\'>\r\n	<option value="" selected class="hidden">Min</option>\r\n	<option value=""></option>\r\n</select\r\n><select class="number-filter-value-end placeholdered input input-select" title=\'Max\'>\r\n	<option value="" selected class="hidden">Max</option>\r\n	<option value=""></option>\r\n</select>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/text_filter"]=function(obj){var __p=[];with(obj||{})__p.push('<input class="text-filter-value input input-text" placeholder="Filter" type="text"/>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["templates/tooltipler"]=function(obj){var __p=[];with(obj||{})__p.push('<div class="tooltipler">\r\n  <div class="tooltip-tip"></div>\r\n  <div class="tooltip-title"></div>\r\n</div>\n');return __p.join("")}}.call(this),function(){window.PTB={}}.call(this),function(){PTB.Services=function(){var t;return t={},{inject:function(e){return t[e]||(t[e]=new PTB.Services[e]),t[e]}}}()}.call(this),function(){PTB.Routes={}}.call(this),function(){PTB.PageCtrl=function(){function t(){this.e=$$(".table"),this.ePageTitle=$$("title"),this.ePageSubtitle=$$(".subtitle"),this.dataService=PTB.Services.inject("DataService"),this.i18n=PTB.Services.inject("I18n"),this.router=PTB.Services.inject("RouterService"),this.build(),this.dataService.all(function(t){return function(e){return t.parseResults(e)}}(this))}return t.prototype.gamesUrl="/games.json",t.prototype.games=[],t.prototype.filteredGames=[],t.prototype.build=function(){return this.tooltipler=new PTB.Tooltipler},t.prototype.parseResults=function(t){var e,r,i,s;for(console.time("Build time"),s=t.games,r=0,i=s.length;i>r;r++)e=s[r],e.flagsList=t.flags,e.osFlagsList=t.osFlags,e.featuresFlagsList=t.featuresFlags,e.flagsLabels=this.i18n.t("flags"),this.games.push(new PTB.Game(e));return this.filteredGames=this.games,this.buildContainers()},t.prototype.buildContainers=function(){return this.gamesContainer=new PTB.GamesContainer(this.games),this.filtersContainer=new PTB.FiltersContainer,this.sortersContainer=new PTB.SortersContainer,this.filter(),this.router.hasAdditionalParams()||!this.gamesContainer.isPreRendered()?this.render():this.setGames(),this.bind()},t.prototype.bind=function(){return this.filtersContainer.on("change",function(t){return function(e){return t.filter(e),t.render()}}(this)),this.sortersContainer.on("change",function(t){return function(){return t.sort(),t.render()}}(this)),this.router.onRouteChange(function(t){return function(e){return t.setPageTitle(e.title)}}(this)),this.e.addEventListener("click",this.onClick.bind(this))},t.prototype.setGames=function(){return this.gamesContainer.setGames(this.filteredGames)},t.prototype.render=function(){return this.setGames(),console.time("Render time"),this.gamesContainer.render(),console.timeEnd("Render time")},t.prototype.filter=function(t){var e,r;return console.time("Filter time"),e=t?this.filteredGames:this.games,r=[],e=this.filtersContainer.filter(this.games,r),console.timeEnd("Filter time"),this.filteredGames=e,this.sort()},t.prototype.sort=function(){return this.sortersContainer.sort(this.filteredGames)},t.prototype.onClick=function(t){return t.target.classList.contains("tag")?this.filtersContainer.broadcast("tag",t.target.innerHTML):void 0},t.prototype.setPageTitle=function(t){var e;return e=this.ePageTitle.innerHTML,e=e.split(/\s+\-\s+/)[0],this.ePageTitle.innerHTML=""+e+" - "+t,this.ePageSubtitle.innerHTML=t},t}()}.call(this),function(){PTB.TableCtrl=function(){function t(t){this.e=t}return t}()}.call(this),function(){var t=[].slice;PTB.Eventable=function(){function e(){}return e.prototype.callbacks={},e.prototype.on=function(t,e){var r;return this.callbacks===PTB.Eventable.prototype.callbacks&&(this.callbacks={}),(r=this.callbacks)[t]||(r[t]=[]),this.callbacks[t].push(e)},e.prototype.fire=function(){var e,r,i,s,n,a,o;if(i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],this.callbacks[i]){for(a=this.callbacks[i],o=[],s=0,n=a.length;n>s;s++)r=a[s],o.push(r.apply(null,e));return o}},e}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};window.$=document.querySelectorAll.bind(document),window.$$=document.querySelector.bind(document),Element.prototype.$=Element.prototype.querySelectorAll,Element.prototype.$$=Element.prototype.querySelector,PTB.DOMElement=function(t){function r(){this.e=document.querySelector("["+this.name+"]")}return e(r,t),r}(PTB.Eventable),PTB.TemplateElement=function(t){function r(){var t,e;t=JST["templates/"+this.name.replace(/-/g,"_")](this.attributes),this.e?this.e.innerHTML=t:(e=document.createElement(this.tmpWrapper),e.innerHTML=t,this.e=e.firstChild)}return e(r,t),r.prototype.name="",r.prototype.tmpWrapper="div",r.prototype.displayValue="block",r.prototype.attributes={},r}(PTB.Eventable)}.call(this),PTB.Routes.mappingData={"/":{sortd:"playtimeOverBuck",title:"It ended up being a little more than playtime for the buck: it kind of let you discover games&trade;"},"/linux":{title:"Games for Linux",sortd:"playtimeOverBuck",os:"linux"},"/osx":{title:"Games for Mac OSX",sortd:"playtimeOverBuck",os:"mac"},"/windows":{title:"Games for Windows",sortd:"playtimeOverBuck",os:"win"},"/recently-launched":{title:"List of recently launched games",sort:"launchDate",launchDate:"+0d~"},"/oldest-games":{title:"The oldest games of Steam",sortd:"launchDate"},"/old-games":{title:"Games older than 5 years",sort:"launchDate",launchDate:"5y~"},"/lowest-price":{title:"Non-free games with the lowest prices",sort:"finalPrice",finalPrice:">0~"},"/most-expensive":{title:"The most expensive games",sortd:"finalPrice"},"/free":{title:"Free games",finalPrice:"~0"},"/on-sale":{title:"Games on sale",sortd:"sale",sale:"0~"},"/linux-on-sale":{title:"Games on sale for Linux",sortd:"sale",sale:"0~",os:"linux"},"/windows-on-sale":{title:"Games on sale for Windows",sortd:"sale",sale:"0~",os:"win"},"/mac-on-sale":{title:"Games on sale for Mac",sortd:"sale",sale:"0~",os:"mac"},"/strategy":{title:"Strategy games",sort:"tags",tags:"strategy"},"/fps":{title:"FPS [First Person Shooter] games",sort:"tags",tags:"fps"},"/action":{title:"Action games",sort:"tags",tags:"action"},"/adventure":{title:"Adventure games",sort:"tags",tags:"adventure"},"/indie":{title:"Indie games",sort:"tags",tags:"indie"},"/simulation":{title:"Simulation games",sort:"tags",tags:"simulation"},"/co-op":{title:"Co-op games",sort:"tags",tags:"co-op"},"/local-co-op":{title:"Local Co-op games",sort:"tags",tags:"local co-op"},"/moba":{title:"Moba games",sort:"tags",tags:"moba"},"/comedy":{title:"Comedy games",sort:"tags",tags:"comedy"},"/point-and-click":{title:"Point & click games",sort:"tags",tags:"point and click"},"/space":{title:"Space games",sort:"tags",tags:"space"},"/sci-fi":{title:"Sci-fi games",sort:"tags",tags:"sci-fi"},"/classic":{title:"Classic games",sort:"tags",tags:"classic"},"/retro":{title:"Retro games",sort:"tags",tags:"retro"},"/city-builder":{title:"City building games",sort:"tags",tags:"city builder"},"/tycoon":{title:"Tycoon games",sort:"tags",tags:"tycoon"},"/puzzle":{title:"Puzzle games",sort:"tags",tags:"puzzle"},"/platformer":{title:"Platformer games",sort:"tags",tags:"platformer"},"/underrated":{title:"Underrated games",sort:"tags",tags:"underrated"},"/tower-defense":{title:"Tower defense games",sort:"tags",tags:"tower defense"},"/casual":{title:"F*cking casual games",sort:"tags",tags:"casual"},"/most-reviews":{title:"Games with a lot of reviews",sortd:"reviews"},"/best-reviews":{title:"Games with the best reviews",sortd:"reviewsDistribution",reviews:"50~"},"/worse-reviews":{title:"Games with the worse reviews",sort:"reviewsDistribution",reviews:"50~"},"/good-reviews":{title:"Games with good reviews",sortd:"reviewsDistribution",reviewsDistribution:90,reviews:"100~"},"/low-playtime-disparity":{title:"Games with the lowest playtime disparity",sort:"playtimeDisparity",reviews:"10~"},"/most-playtime":{title:"Games with the highest amount of playing time",sortd:"playtime"},"/best-metascore":{title:"Games with the best metascore",sortd:"metascore"},"/worse-metascore":{title:"Games with the worse metascore",sort:"metascore",metascore:"0~"}},function(){PTB.Routes.aliasData={categories:"tags",lowerName:"name",sortLowerName:"sortName",sortTagsRating:"sortTags",launchDateSince:"launchDate",sortLaunchDateSince:"sortLaunchDate",sortFinalPrice:"sortPrice",finalPrice:"price",sortAverageTime:"sortPlaytime",averageTime:"playtime",sortAverageTimeOverPrice:"sortPlaytimeOverBuck",averageTimeOverPrice:"playtimeOverBuck",sortTotalReviews:"sortReviews",totalReviews:"reviews",sortMeta_score:"sortMetascore",metaScore:"metascore",sortPositiveReviewsPercentage:"sortReviewsDistribution",positiveReviewsPercentage:"reviewsDistribution",sortPlaytimeDeviationPercentage:"sortPlaytimeEqualness",playtimeDeviationPercentage:"playtimeEqualness"}}.call(this),function(){PTB.Routes.ParamsAlias=function(){function t(t){this.parametersAlias=t}return t.prototype.toAlias=function(t){var e,r,i;if("string"==typeof t)return this.paramToAlias(t);e={};for(r in t)i=t[r],this.parametersAlias[r]?e[this.parametersAlias[r]]=i:e[r]=i;return e},t.prototype.fromAlias=function(t){var e,r,i,s,n,a;if("string"==typeof t)return this.paramFromAlias(t);i={};for(s in t){n=t[s],i[s]=n,a=this.parametersAlias;for(r in a)e=a[r],e===s&&(i[r]=n,delete i[e])}return i},t.prototype.paramToAlias=function(t){return this.parametersAlias[t]||t},t.prototype.paramFromAlias=function(t){var e,r,i;i=this.parametersAlias;for(r in i)if(e=i[r],t===e)return r;return t},t}()}.call(this),function(){PTB.Routes.Mapper=function(){function t(t){var e,r,i,s,n,a,o;this.routesMappingData=t,this.mappings=[],this.mappingsHash={},a=this.routesMappingData;for(i in a)r=a[i],e=new PTB.Routes.Map(i,r),this.mappings.push(e),this.mappingsHash[i]=e;for(this.rootMapping=this.mappingsHash["/"],o=this.mappings,s=0,n=o.length;n>s;s++)e=o[s],e.title||(e.title=this.rootMapping.title)}return t.prototype.routeFromParams=function(t){var e,r,i,s,n,a,o,l;for(e=0,s=0,n=null,l=this.mappings,a=0,o=l.length;o>a;a++)r=l[a],i=r.matchParams(t),i>s?(s=i,n=r):i===s&&0!==i&&r!==this.rootMapping&&(n===this.rootMapping&&(n=r),console.warn("Routes collision!",r.path,n.path));return n?n.generateRoute(t):this.rootMapping.generateRoute(t)},t.prototype.routeFromUrl=function(){var t,e,r,i,s,n,a,o,l,u;for(e=window.location.hash.replace(/^#/,""),n=window.location.pathname.replace(/\/$/,""),t=e?e.split("&"):[],s={},l=0,u=t.length;u>l;l++)o=t[l],i=o.split(/\=/),s[i[0]]=i[1]?decodeURIComponent(i[1]).replace(/\+/g," "):null;return r=this.mappingsHash[n]||this.rootMapping,a=r.generateRoute(s)},t}()}.call(this),function(){PTB.Routes.Map=function(){function t(t,e){this.path=t,this.title=e.title,delete e.title,this.params=e}return t.prototype.title="",t.prototype.params={},t.prototype.additionalParams={},t.prototype.matchParams=function(t){var e,r,i,s,n,a,o,l;n=0,s=0,e=!1,l=this.params;for(r in l){i=l[r],s++,e=!0;for(a in t)o=t[a],r===a&&i===o&&n++}return n===s?n:0},t.prototype.generateRoute=function(t){var e,r,i;e={};for(r in t)i=t[r],this.params[r]!==i&&(e[r]=i);return new PTB.Routes.Route(this.path,this.params,e,this.title)},t}()}.call(this),function(){PTB.Routes.Route=function(){function t(t,e,r,i){var s,n,a,o;this.path=t,this.pathParams=e,this.searchParams=r,this.title=i,this.params={},a=this.pathParams;for(s in a)n=a[s],this.params[s]=n;o=this.searchParams;for(s in o)n=o[s],this.params[s]=n;this.pathParams.sort&&this.searchParams.sortd&&delete this.params.sort,this.pathParams.sortd&&this.searchParams.sort&&delete this.params.sortd}return t.prototype.hash=function(){var t,e,r,i;return t=function(){var t,s;t=this.searchParams,s=[];for(r in t)i=t[r],e=encodeURIComponent(i).replace(/%2B/g,"+").replace(/%2F/g,"/"),s.push(r+(i?"="+e:""));return s}.call(this),t.join("&")},t.prototype.trailingSlashPath=function(){return this.path.replace(/\/$/,"")+"/"},t.prototype.hasAdditionalParams=function(){var t;for(t in this.searchParams)return!0;return!1},t}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Routes.Router=function(t){function r(){this.routesMappings=new PTB.Routes.Mapper(this.routesMappingsData),this.paramsAlias=new PTB.Routes.ParamsAlias(this.routesAliasData),this._bind(),this._initializeState()}return e(r,t),r.prototype.ignoreNextEvent=!1,r.prototype.routesMappingsData=PTB.Routes.mappingData,r.prototype.routesAliasData=PTB.Routes.aliasData,r.prototype.rawParams={},r.prototype.params={},r.prototype.previousParams={},r.prototype.route=null,r.prototype.initialized=!1,r.prototype.setStateTimeout=null,r.prototype._bind=function(){return window.addEventListener("hashchange",function(t){return function(){return t.ignoreNextEvent||t._parseLocation(),t.ignoreNextEvent=!1}}(this))},r.prototype.setState=function(t){return this.setStateTimeout&&clearTimeout(this.setStateTimeout),this.setStateTimeout=setTimeout(function(e){return function(){return e.previousParams=e.rawParams,e.rawParams=t,e.params=e.paramsAlias.toAlias(t),e.route=e.routesMappings.routeFromParams(e.params),e._changeLocation()}}(this),250),null},r.prototype.getState=function(){return this.rawParams},r.prototype.getRoute=function(){return this.route},r.prototype.hasAdditionalParams=function(){return this.route.hasAdditionalParams()},r.prototype.setParam=function(t,e){return this.rawParams[t]=e,this.setState(this.rawParams)},r.prototype.removeParam=function(t){return"undefined"!=typeof this.rawParams[t]?(delete this.rawParams[t],this.setState(this.rawParams)):void 0},r.prototype.getParam=function(t){return this.rawParams[t]},r.prototype.onParamChange=function(t,e){return this.on("_param_"+t,e),"undefined"!=typeof this.rawParams[t]&&e(this.rawParams[t]),null},r.prototype.onRouteChange=function(t){return this.on("change",t),t(this.route),null},r.prototype.toAlias=function(t){return this.paramsAlias.toAlias(t)},r.prototype.fromAlias=function(t){return this.paramsAlias.fromAlias(t)},r.prototype.isEmpty=function(){return 0===this.rawParams.keys.length},r.prototype._initializeState=function(){return this.initialized||(this._parseLocation(),this.initialized=!0),null},r.prototype._parseLocation=function(){var t,e,r;this.route=this.routesMappings.routeFromUrl(),this.previousParams=this.rawParams,this.params=this.route.params,this.rawParams=this.paramsAlias.fromAlias(this.route.params),this.fire("change",this.route),r=this.rawParams;for(e in r)t=r[e],this.rawParams[t]!==this.previousParams[t]&&this.fire("_param_"+t,e);return null},r.prototype._changeLocation=function(){return this.ignoreNextEvent=!0,window.history.replaceState({},this.route.title,this.route.trailingSlashPath()),window.location.hash=this.route.hash(),this.fire("change",this.route)},r}(PTB.Eventable)}.call(this),function(){PTB.Services.DataService=function(){function t(){this.dataUrl="/"+document.body.attributes["games-db"].value}return t.prototype.callbacks={},t.prototype.data=null,t.prototype.dataUrl=null,t.prototype.loading=!1,t.prototype.games=function(t){return this._getData(t,"games")},t.prototype.osFlags=function(t){return this._getData(t,"osFlags")},t.prototype.featuresFlags=function(t){return this._getData(t,"featuresFlags")},t.prototype.tags=function(t){return this._getData(t,"tags")},t.prototype.all=function(t){return this._getData(t,"")},t.prototype._getData=function(t,e){var r;return this.data?t(e?this.data[e]:this.data):((r=this.callbacks)[e]||(r[e]=[]),this.callbacks[e].push(t),this._fetchData())},t.prototype._fetchData=function(){var t;return this.loading?void 0:(this.loading=!0,t=new XMLHttpRequest,t.addEventListener("load",function(e){return function(){return console.timeEnd("Fetch time"),e._parseResults(t.responseText)}}(this)),console.time("Fetch time"),t.open("GET",this.dataUrl,!0),t.send())},t.prototype._parseResults=function(t){return console.time("JSON parse time"),this.data=JSON.parse(t),console.timeEnd("JSON parse time"),this._triggerCallbacks()},t.prototype._triggerCallbacks=function(){var t,e,r,i,s,n;n=this.callbacks;for(r in n)for(t=n[r],i=0,s=t.length;s>i;i++)(e=t[i])(r?this.data[r]:this.data);return this.callbacks={}},t}()}.call(this),function(){PTB.Services.RouterService=PTB.Routes.Router}.call(this),function(){var t=[].slice;PTB.Services.I18n=function(){function e(){this.data=this.locales[this.locale]}return e.prototype.locales={en:{flags:{win:"Windows",mac:"Mac OSX",linux:"Linux",singlePlayer:"Single Player",multiPlayer:"Multiplayer",coOp:"Co-op",achievements:"Achievements",cloud:"Steam cloud",cards:"Steam cards",controller:"Controller support",partialController:"Partial controller support",stats:"Stats",workshop:"Steam Workshop",captions:"Closed Captions",commentary:"Commentaries",levelEditor:"Level editor",vac:"Valve Anti-Cheat",vr:"Virtual Reality support",leaderboards:"Steam leaderboards"}}},e.prototype.locale="en",e.prototype.t=function(){var e,r,i,s,n,a,o,l,u,p,h,c;for(r=1<=arguments.length?t.call(arguments,0):[],i=[],a=0,u=r.length;u>a;a++)for(e=r[a],c=e.split("."),o=0,p=c.length;p>o;o++)n=c[o],i.push(n);for(s=this.data,l=0,h=i.length;h>l;l++)n=i[l],s=s[n];return s},e}()}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.GamesContainer=function(t){function r(t){this.games=t,r.__super__.constructor.apply(this,arguments),this.bind()}return e(r,t),r.prototype.name="games-container",r.prototype.initialRender=100,r.prototype.currentRender=100,r.prototype.autoLoadPixelsAway=2e3,r.prototype.bind=function(){return document.addEventListener("scroll",this.autoLoad.bind(this))},r.prototype.setGames=function(t){this.games=t},r.prototype.render=function(){var t,e,r,i,s;for(r=this.games.slice(0,this.initialRender),this.empty(),t=document.createDocumentFragment(),i=0,s=r.length;s>i;i++)e=r[i],e.render(),t.appendChild(e.e);return this.e.appendChild(t),this.currentRender=this.initialRender},r.prototype.isPreRendered=function(){return 0!==this.e.children.length},r.prototype.renderMore=function(t){var e,r,i,s,n;for(null==t&&(t=50),i=this.games.slice(this.currentRender,this.currentRender+t),e=document.createDocumentFragment(),s=0,n=i.length;n>s;s++)r=i[s],r.render(),e.appendChild(r.e);return this.e.appendChild(e),this.currentRender+=t},r.prototype.empty=function(){var t;for(t=[];this.e.firstChild;)t.push(this.e.removeChild(this.e.firstChild));return t},r.prototype.autoLoad=function(){var t;return t=document.body.scrollTop||document.documentElement.scrollTop,document.body.clientHeight-t<=this.autoLoadPixelsAway?this.renderMore():void 0},r}(PTB.DOMElement)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Game=function(t){function r(t){this.attributes=t,this.oldHighlightedTags=[],this.highlightedTags=[],this.attributes.lowerName=this.attributes.name.toLowerCase(),this.attributes.launchDate?(this.attributes.launchDateSince=this.dateNow-this.attributes.launchDate,this.attributes.launchDateSinceText=timeSince(new Date(this.attributes.launchDate))):(this.attributes.launchDateSince=null,this.attributes.launchDateSinceText=null),this.attributes.totalReviews=this.attributes.positiveReviewsLength+this.attributes.negativeReviewsLength,null==this.attributes.price&&(this.attributes.price=0),this.attributes.finalPrice=null!=this.attributes.salePrice?this.attributes.salePrice:this.attributes.price,this.attributes.averageTimeOverPrice=0===this.attributes.finalPrice||null===this.attributes.finalPrice||null===this.attributes.averageTime?null:Math.round(this.attributes.averageTime/this.attributes.finalPrice*100)/100,this.attributes.playtimeDeviationPercentage=null!=this.attributes.playtimeDeviation?Math.floor(1e4*this.attributes.playtimeDeviation)/100:null,this.attributes.positiveReviewsPercentage=this.attributes.totalReviews>5?Math.floor(this.attributes.positiveReviewsLength/this.attributes.totalReviews*1e4)/100:null,this.attributes.tagsRating=0,this.attributes.sale=this.attributes.salePrice?Math.floor(100*(1-this.attributes.salePrice/this.attributes.price)):null}return e(r,t),r.prototype.name="game",r.prototype.built=!1,r.prototype.display=!0,r.prototype.oldHighlightedTags=[],r.prototype.highlightedTags=[],r.prototype.dateNow=Date.now(),r.prototype.buildElement=function(){var t,e;return this.built?void 0:(t=JST["templates/game"](this.attributes),e=document.createElement("tbody"),e.innerHTML=t,this.e=e.firstChild,this.eTags=this.e.$(".tag"),this.built=!0)},r.prototype.highlightTags=function(t){return this.highlightedTags.push(t),this.calculateTagsRating()},r.prototype.unhighlightTags=function(){var t,e,r,i;for(i=this.highlightedTags,e=0,r=i.length;r>e;e++)t=i[e],this.oldHighlightedTags.push(t);return this.highlightedTags=[]},r.prototype.calculateTagsRating=function(){var t,e;return t=1e3*-this.highlightedTags.length,e=this.highlightedTags.reduce(function(t,e){return t+e}),this.attributes.tagsRating=t+e},r.prototype.render=function(){var t,e,r,i,s,n,a,o,l;for(this.buildElement(),a=this.oldHighlightedTags,r=0,s=a.length;s>r;r++)e=a[r],this.eTags[e].classList.remove("highlighted");for(o=this.highlightedTags,l=[],i=0,n=o.length;n>i;i++)t=o[i],l.push(this.eTags[t].classList.add("highlighted"));return l},r.prototype.toggle=function(){},r}(PTB.Eventable)}.call(this),function(){PTB.Filters={}}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.FiltersContainer=function(t){function r(){var t,e,i,s,n,a,o;o=PTB.Filters;for(s in o)if(t=o[s],t.prototype.name)for(i=$("["+t.prototype.name+"]"),n=0,a=i.length;a>n;n++)e=i[n],this.filters.push(new t(e));this.bind(),r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.name="filters-container",r.filters=[],r.prototype.filters=[],r.prototype.bind=function(){var t,e,r,i,s;for(i=this.filters,s=[],e=0,r=i.length;r>e;e++)t=i[e],s.push(t.on("change",function(t){return function(e){return null==e&&(e=!1),t.fire("change",e)}}(this)));return s},r.prototype.filter=function(t,e){var r,i,s,n,a;for(r=t,a=this.filters,s=0,n=a.length;n>s;s++)i=a[s],r=i.filter(r,e);return r},r.prototype.broadcast=function(t,e){var r,i,s,n,a;for(n=this.filters,a=[],i=0,s=n.length;s>i;i++)r=n[i],a.push(r.broadcast(t,e));return a},r.prototype.getFiltersState=function(){var t,e,r,i,s;for(e={},s=this.filters,r=0,i=s.length;i>r;r++)t=s[r],t.active&&(e[t.filterValueName]=t.getUrlValue());return e},r.prototype.setFiltersState=function(t){var e,r,i,s;s=[];for(r in t)i=t[r],s.push(function(){var t,s,n,a;for(n=this.filters,a=[],t=0,s=n.length;s>t;t++)e=n[t],a.push(e.filterValueName===r?e.setUrlValue(i):void 0);return a}.call(this));return s},r}(PTB.DOMElement)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Filters.BaseFilter=function(t){function r(t){this.e=t,this.e.style.width=this.e.offsetWidth+"px",r.__super__.constructor.apply(this,arguments),this.filterValueName=this.e.attributes.filter.value,this.router=PTB.Services.inject("RouterService")}return e(r,t),r.prototype.active=!1,r.prototype.router=null,r.prototype.broadcast=function(t,e){return this.fire(t,e)},r.prototype.filter=function(t){return t},r.prototype.changeRoute=function(){return this.active?this.router.setParam(this.filterValueName,this.getUrlValue()):this.router.removeParam(this.filterValueName)},r.prototype.bindRoute=function(){return this.router.onParamChange(this.filterValueName,this.setUrlValue.bind(this))},r}(PTB.TemplateElement)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Filters.FlagsFilter=function(t){function r(t){this.e=t,this.dataService=PTB.Services.inject("DataService"),this.i18n=PTB.Services.inject("I18n"),this.readOptions(),this.attributes={},this.attributes.flagsMessages=this.i18n.t("flags"),this.dataService[this.flagsListDataName](function(t){return function(e){return t.flagsList=t.attributes.flagsList=e,r.__super__.constructor.call(t,t.e),t.bind(),t.bindRoute()}}(this))}return e(r,t),r.prototype.name="flags-filter",r.prototype.readOptions=function(){return this.flagsListDataName=this.e.attributes["flags-list-data"].value},r.prototype.bind=function(){return this.eInputs=this.e.$(".filter-flag-input"),this.e.addEventListener("change",function(t){return function(){return t.onChange()}}(this))},r.prototype.onChange=function(){return this.readValues(),this.changeRoute(),this.fire("change")},r.prototype.readValues=function(){var t,e,r,i;for(this.value=0,i=this.eInputs,e=0,r=i.length;r>e;e++)t=i[e],t.checked&&(this.value+=parseInt(t.value));return this.active=this.value>0},r.prototype.writeValues=function(){var t,e,r,i;for(i=this.eInputs,e=0,r=i.length;r>e;e++)t=i[e],parseInt(t.value)&this.value&&(t.checked=!0);return null},r.prototype.setUrlValue=function(t){var e,r,i,s;for(r=t.split("."),this.value=0,i=0,s=r.length;s>i;i++)e=r[i],this.flagsList[e]&&(this.value+=this.flagsList[e]);return this.writeValues()},r.prototype.getUrlValue=function(){var t,e,r,i;r=[],i=this.flagsList;for(t in i)e=i[t],e&this.value&&r.push(t);
return r.join(".")},r.prototype.filter=function(t,e){var r,i,s,n,a;if(!this.value)return t;for(r=[],n=0,a=t.length;a>n;n++)s=t[n],i=s.attributes[this.filterValueName],i&&(i&this.value)>=this.value?r.push(s):e.push(s);return r},r}(PTB.Filters.BaseFilter)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Filters.NumberFilter=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.bind(),this.createOptions(),this.readValues(),this.findPlaceholder(),this.bindRoute()}return e(r,t),r.prototype.name="number-filter",r.prototype.options=[],r.prototype.bind=function(){return this.eValueStart=this.e.getElementsByClassName("number-filter-value-start")[0],this.eValueEnd=this.e.getElementsByClassName("number-filter-value-end")[0],this.eValueStart.addEventListener("change",function(t){return function(){return t.onChange()}}(this)),this.eValueEnd.addEventListener("change",function(t){return function(){return t.onChange()}}(this))},r.prototype.onChange=function(){return this.applyPlaceholder(),this.readValues(),this.changeRoute(),this.fire("change")},r.prototype.readValues=function(){return this.valueStart=this.parseValue(this.eValueStart.value),this.valueEnd=this.parseValue(this.eValueEnd.value),this.setActive(this.valueStart.selected,this.valueEnd.selected)},r.prototype.writeValues=function(){return this.eValueStart.value=this.valueStart.raw,this.eValueEnd.value=this.valueEnd.raw,this.applyPlaceholder()},r.prototype.setUrlValue=function(t){var e,r,i,s,n,a,o,l,u;if(l=t.replace(/\+/g,">").split(/~/),n=l[0],e=l[1],null!=e&&this.parseOptionsValue(n)!==!1&&this.parseOptionsValue(e)!==!1){for(i=!1,r=!1,u=this.options,a=0,o=u.length;o>a;a++)s=u[a],s.raw===n&&(this.valueStart=this.parseValue(s.value),i=!0),s.raw===e&&(this.valueEnd=this.parseValue(s.value),r=!0);return i||""===n||(s=this.parseOption(n),this.options.push(s),this.insertOption(s),this.valueStart=this.parseValue(s.value)),r||""===e||(s=this.parseOption(e),this.options.push(s),this.insertOption(s),this.valueEnd=this.parseValue(s.value)),this.setActive(this.valueStart.selected,this.valueEnd.selected),this.writeValues()}},r.prototype.getUrlValue=function(){var t,e,r,i,s,n;for(r="",t="",n=this.options,i=0,s=n.length;s>i;i++)e=n[i],e.value===this.valueStart.raw&&(r=e.raw),e.value===this.valueEnd.raw&&(t=e.raw);return[r,t].join("~").replace(/>/g,"+")},r.prototype.parseValue=function(t){var e;return e={raw:t,number:parseFloat(t.replace(">","")),open:/>/.test(t),selected:""!==t},isNaN(e.number)&&(e.number=null),e},r.prototype.createOptions=function(){return this.parseOptions(),this.insertOptions()},r.prototype.insertOptions=function(){var t,e,r,i,s;for(i=this.options,s=[],e=0,r=i.length;r>e;e++)t=i[e],s.push(this.insertOption(t));return s},r.prototype.insertOption=function(t){var e;return t.eStart=document.createElement("option"),t.eStart.value=t.value,e=document.createTextNode(t.label),t.eStart.appendChild(e),this.eValueStart.appendChild(t.eStart),/\>/.test(t.value)?void 0:(t.eEnd=t.eStart.cloneNode(!0),this.eValueEnd.appendChild(t.eEnd))},r.prototype.parseOptions=function(){var t,e,r,i,s;if(this.options=[],this.rawOptions=this.e.attributes["filter-options"],this.rawOptions){for(this.rawOptions=this.rawOptions.value,this.rawOptions=this.rawOptions.split(","),i=this.rawOptions,s=[],e=0,r=i.length;r>e;e++)t=i[e],s.push(this.options.push(this.parseOption(t)));return s}},r.prototype.parseOption=function(t){var e,r;return r=t.replace(" ","///").split("///"),1===r.length&&r.push(r[0]),e={raw:r[0],value:this.parseOptionsValue(r[0],r[1]),label:this.parseOptionsText(r[1],r[0]),eStart:null,eEnd:null}},r.prototype.parseOptionsValue=function(t){return t},r.prototype.parseOptionsText=function(t){return t},r.prototype.filter=function(t,e){var r,i,s,n,a,o,l,u;for(r=[],l=0,u=t.length;u>l;l++)s=t[l],i=s.attributes[this.filterValueName],this.valueStart.selected||this.valueEnd.selected?null===i?this.valueStart.selected&&null!==this.valueStart.number?e.push(s):r.push(s):this.valueEnd.selected&&null===this.valueEnd.number?e.push(s):(o=null===this.valueStart.number?0:this.valueStart.number,a=this.valueEnd.number,n=!1,this.valueStart.selected&&(n=o>i),!n&&this.valueStart.selected&&this.valueStart.open&&(n=i===o),!n&&this.valueEnd.selected&&(n=i>this.valueEnd.number),n?e.push(s):r.push(s)):r.push(s);return r},r.prototype.findPlaceholder=function(){return this.eStartPlaceholder=this.eValueStart.children[this.eValueStart.selectedIndex],this.eEndPlaceholder=this.eValueEnd.children[this.eValueEnd.selectedIndex]},r.prototype.applyPlaceholder=function(){var t;return""===this.eValueStart.value&&(this.eStartPlaceholder.selected=!0),t=""===this.eValueStart.value?"add":"remove",this.eValueStart.classList[t]("placeholdered"),""===this.eValueEnd.value&&(this.eEndPlaceholder.selected=!0),t=""===this.eValueEnd.value?"add":"remove",this.eValueEnd.classList[t]("placeholdered")},r.prototype.setActive=function(t,e){return this.active=t||e,t?this.eValueStart.classList.add("active"):this.eValueStart.classList.remove("active"),e?this.eValueEnd.classList.add("active"):this.eValueEnd.classList.remove("active"),null},r}(PTB.Filters.BaseFilter)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Filters.DateFilter=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.name="date-filter",r.prototype.timeMultipliers={d:864e5,w:6048e5,m:2592e6,y:31536e6},r.prototype.parseOptionsValue=function(t){var e,r,i,s,n,a;return i=/>/.test(t),e=t.match(/([0-9]+)([a-z]+)/i),""===t?"0":e?(r=e[1],n=e[2],a=this.timeMultipliers[n],s=r*a,(i?">":"")+s.toString()):!1},r.prototype.parseOptionsText=function(t){var e,r;return e=/^1[a-z]/i.test(t)?"":"s",r={d:" day"+e+" ago",w:" week"+e+" ago",m:" month"+e+" ago",y:" year"+e+" ago"},t.replace(/[a-z]+$/i,function(t){return r[t]})},r}(PTB.Filters.NumberFilter)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Filters.TextFilter=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.bind(),this.bindRoute()}return e(r,t),r.prototype.name="text-filter",r.prototype.value="",r.prototype.oldValue="",r.prototype.changeTimeout=null,r.prototype.bind=function(){return this.eValue=this.e.$$(".text-filter-value"),this.eValue.addEventListener("keyup",this.onChange.bind(this))},r.prototype.onChange=function(){return this.changeTimeout&&clearTimeout(this.changeTimeout),this.changeTimeout=setTimeout(function(t){return function(){return t.readValues(),t.changeRoute(),t.fire("change",t.shrinking)}}(this),250)},r.prototype.readValues=function(){return this.oldValue=this.value,this.value=this.eValue.value.toLowerCase(),this.shrinking=""===this.value.slice(0,this.oldValue.length).replace(this.oldValue,"")&&""!==this.value,this.active=""!==this.value},r.prototype.writeValues=function(){return this.eValue.value=this.value},r.prototype.filter=function(t,e){var r,i,s,n,a,o,l;if(""===this.value)return t;for(r=[],a=this.value.replace(/[^a-z0-9 ]/gi," ").replace(/^\s+|\s+$/,"").split(/\s+/gi),n=new RegExp("^.*"+a.join(".*")+".*$"),o=0,l=t.length;l>o;o++)s=t[o],i=s.attributes[this.filterValueName],n.test(i)?r.push(s):e.push(s);return r},r.prototype.getUrlValue=function(){return this.value},r.prototype.setUrlValue=function(t){return this.value=t,this.shrinking=!1,this.oldValue="",this.active=""!==this.value,this.writeValues()},r}(PTB.Filters.BaseFilter)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.Filters.ArrayFilter=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return e(r,t),r.prototype.name="array-filter",r.prototype.getUrlValue=function(){return this.cleanValue().join("/").replace(/\s+/g,"+")},r.prototype.setUrlValue=function(t){return t?(this.value=t.replace(/\//g,", ").replace(/\+/g," "),this.shrinking=!1,this.oldValue="",this.active=""!==this.value,this.writeValues()):void 0},r.prototype.cleanValue=function(){return this.value.replace(/[^a-z0-9 \-&,]/gi," ").replace(/^\s+,?|,?\s+$/,"").split(/\s*,\s*/gi)},r.prototype.filter=function(t,e){var r,i,s,n,a,o,l,u,p,h,c,f,d,g,m,v,y,b,w,P,T,_,S,E,R,V,B;for(r=[],i=[],c=this.cleanValue(),l=d=0,y=c.length;y>d;l=++d)p=c[l],""===p&&(c.splice(l,1),--d);if(0===c.length){for(g=0,b=t.length;b>g;g++)o=t[g],o.unhighlightTags();return t}for(f=c.map(function(t){return new RegExp("^"+t.replace(/-/g,"\\-"),"i")}),m=0,w=t.length;w>m;m++){if(o=t[m],u=0,o.unhighlightTags(),a=o.attributes[this.filterValueName])for(l=v=0,P=a.length;P>v;l=++v)for(p=a[l],E=0,T=f.length;T>E;E++)h=f[E],h.test(p)&&(u++,o.highlightTags(l));u>0?(i[V=u-1]||(i[V]=[]),i[u-1].push(o)):e.push(o)}for(i.reverse(),R=0,_=i.length;_>R;R++)if(n=i[R])for(B=0,S=n.length;S>B;B++)s=n[B],r.push(s);return r},r.prototype.bind=function(){return r.__super__.bind.apply(this,arguments),this.on("tag",function(t){return function(e){return t.eValue.value+=""===t.eValue.value?e:", "+e,t.onChange()}}(this))},r}(PTB.Filters.TextFilter)}.call(this),function(){var t={}.hasOwnProperty,e=function(e,r){function i(){this.constructor=e}for(var s in r)t.call(r,s)&&(e[s]=r[s]);return i.prototype=r.prototype,e.prototype=new i,e.__super__=r.prototype,e};PTB.SortersContainer=function(t){function r(){r.__super__.constructor.apply(this,arguments),this.buildSorters(),this.router=PTB.Services.inject("RouterService"),this.bind()}return e(r,t),r.prototype.name="sorters-container",r.prototype.sorters=[],r.prototype.activeSorter=null,r.prototype.buildSorters=function(){var t,e,r,i,s;for(this.sorters=[],i=this.e.$("[sort]"),s=[],e=0,r=i.length;r>e;e++)t=i[e],s.push(this.sorters.push(new PTB.Sorter(t)));return s},r.prototype.bind=function(){var t,e,r,i;for(i=this.sorters,e=0,r=i.length;r>e;e++)t=i[e],t.on("change",function(t){return function(e){return t.changeSorter(e),t.changeRoute(),t.fire("change")}}(this));return this.router.onParamChange("sort",function(t){return function(e){return t.setSortState(e,!0)}}(this)),this.router.onParamChange("sortd",function(t){return function(e){return t.setSortState(e,!1)}}(this))},r.prototype.sort=function(t){return this.activeSorter&&this.activeSorter.sort(t),null},r.prototype.setSortState=function(t,e){var r,i,s,n,a;for(t=this.router.fromAlias(t),n=this.sorters,a=[],i=0,s=n.length;s>i;i++)r=n[i],r.sortValueName===t?(r.setAscending(e),a.push(this.changeSorter(r))):a.push(void 0);return a},r.prototype.changeSorter=function(t){return null!=this.activeSorter&&this.activeSorter!==t&&this.activeSorter.reset(),this.activeSorter=t},r.prototype.changeRoute=function(){var t,e,r;return e=this.activeSorter.ascending?"sort":"sortd",t=this.activeSorter.ascending?"sortd":"sort",r=this.router.toAlias(this.activeSorter.sortValueName),this.router.setParam(e,r),this.router.removeParam(t)},r}(PTB.DOMElement),PTB.Sorter=function(t){function r(t){this.e=t,this.sortValueName=this.e.attributes.sort.value,this.bind()}return e(r,t),r.prototype.ascending=!1,r.prototype.enabled=!1,r.prototype.bind=function(){return this.e.addEventListener("click",function(t){return function(){return t.changeDirection()}}(this))},r.prototype.setAscending=function(t){return this.enabled=null!=t,this.ascending=t===!0,this.drawDirection()},r.prototype.changeDirection=function(){return this.enabled=!0,this.ascending=!this.ascending,this.drawDirection(),this.fire("change",this)},r.prototype.drawDirection=function(){var t;return t=this.ascending&&this.enabled?"add":"remove",this.e.classList[t]("ascending"),t=!this.ascending&&this.enabled?"add":"remove",this.e.classList[t]("descending")},r.prototype.reset=function(){return this.enabled=!1,this.drawDirection()},r.prototype.sort=function(t){var e;return e=this.ascending?1:-1,t.sort(function(t){return function(r,i){var s,n;return s=r.attributes[t.sortValueName],n=i.attributes[t.sortValueName],null===s&&(s=-999),null===n&&(n=-999),s>n?e:n>s?-1*e:r.attributes.steamAppId-i.attributes.steamAppId}}(this)),null},r}(PTB.DOMElement)}.call(this),function(){PTB.Tooltipler=function(){function t(){this.createElement(),this.bind(),this.insert()}return t.prototype.mousePosX=0,t.prototype.mousePosY=0,t.prototype.visible=!1,t.prototype.createElement=function(){var t,e;return t=JST["templates/tooltipler"](),e=document.createElement("div"),e.innerHTML=t,this.e=e.firstChild,this.eTip=this.e.$$(".tooltip-tip"),this.eTitle=this.e.$$(".tooltip-title")},t.prototype.bind=function(){return document.body.addEventListener("mouseover",function(t){return function(e){return t.toggle(t.title(e.target))}}(this)),document.body.addEventListener("mousemove",function(t){return function(e){return t.updateMousePos(e)}}(this))},t.prototype.insert=function(){return document.body.appendChild(this.e)},t.prototype.updateMousePos=function(t){return this.mousePosX=t.pageX,this.mousePosY=t.pageY,this.updateTooltipPos()},t.prototype.updateTooltipPos=function(){var t,e,r,i;return this.visible?(t=document.documentElement.clientWidth,i=document.body.scrollLeft,e=this.e.clientWidth/2,r=t+i-(this.mousePosX+e),r>0&&(r=0),this.transform(this.eTip,-r),this.transform(this.e,this.mousePosX-e+r,this.mousePosY+25)):void 0},t.prototype.setThePositionToTheTopLeftSoTheFuckerDoesntGlitchTheBodyOverflowOnChrome=function(){return this.transform(this.e,0,0)},t.prototype.title=function(t){for(;!t.title&&!t.tooltipler&&t.parentElement;)t=t.parentElement;return t.title&&(t.tooltipler=t.title,t.title=""),t.tooltipler},t.prototype.toggle=function(t){return t?(this.setThePositionToTheTopLeftSoTheFuckerDoesntGlitchTheBodyOverflowOnChrome(),t=t.replace(String.fromCharCode(13),"<br/>"),this.eTitle.innerHTML=t,this.visible=!0,this.e.classList.add("visible"),this.updateTooltipPos()):this.e.classList.remove("visible")},t.prototype.transform=function(t,e,r){return null==e&&(e=0),null==r&&(r=0),t.style.transform="translate("+e+"px, "+r+"px)",t.style.webkitTransform="translate("+e+"px, "+r+"px)",t.style.msTransform="translate("+e+"px, "+r+"px)"},t}()}.call(this),function(){window.app=new PTB.PageCtrl}.call(this),function(){var t,e,r,i,s,n,a,o,l,u,p,h,c;if(n=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1},o=[["All the money goes to coffee!","15svpDxpjffitY1s3i5UrA3tSwDFuEB74w","/assets/wallet-1.png?cb=4ec3734fda4442c46667035dfbddb5af"],["Money = Food = Life = More apps!","19ATZc4Upe3hw1ENFhJxrBLdboazFcfTPr","/assets/wallet-2.png?cb=70a226b62a325862fab2717b670e93f5"],["So I can keep studying!","1Jqo3QcypWQaBBsyZJTdFPdnFAeDKrh4Tp","/assets/wallet-3.png?cb=15c1e24fa6cc9fc3af3da5f4f457aaf6"],["Better than Reddit gold!","1HwCcQLvLfqYyanxjvoDDq4DBHuKkXEnSX","/assets/wallet-4.png?cb=5f3084e43386fb47d08387ddc5cd1888"],["Not better than Reddit gold!","1JxDEcu2fruF2H6EGJPgkzMsQdNXGPh71E","/assets/wallet-5.png?cb=61eb18af9a951d87b2605e8aaeba8c02"],["My cat demands food!","1FpGeXf1E65zso9mx37bnenDDH2xQf3nru","/assets/wallet-6.png?cb=07cb850b6292d746dc5362dc33233290"],["All the money goes to charity!","1Di5bPhnNcvFna4trCjJXmaWY8Xop8rf9q","/assets/wallet-7.png?cb=4ac05a538ea7b70f116f0e8ab7be2d3b"],["Raise the GDP of\u200f Argentina by 0.000001%!","1JdJv7JKJizDgFZxBZfD8DdH7S47ftpr1Z","/assets/wallet-8.png?cb=aaff8c01dc5fdbf245a249b226f83770"],["Magic Internet money!","1GTRugHJiwC1KB8dVWuib4LCHtuUwDmx97","/assets/wallet-9.png?cb=a6e26ee6a43c432d78a6f36b9302a2f0"],["Time is money! And I need time to study!","14qZxou88RNbzyYPQs56Wy5d1aahVY7e37","/assets/wallet-10.png?cb=9697c3b10b94e90a4bcdbfa2e72d57f0"]],l=Math.floor(Math.random()*o.length),a=o[l],r=$$(".donate"),i=$$(".bitcoin-message"),e=$$(".bitcoin-address"),s=$$(".bitcoin-qr"),i.innerText=a[0],e.innerText=a[1],s.src=a[2],n())for(c=$(".backflip-container"),u=function(t){return t.addEventListener("click",function(){return t.classList.toggle("active")})},p=0,h=c.length;h>p;p++)t=c[p],u(t)}.call(this);